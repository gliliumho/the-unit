<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Unit: libnrf9e5_function_reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="theunit_68_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Unit
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Modern railway reflector</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">libnrf9e5_function_reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><hr/>
 <h1>Files</h1>
<ul>
<li><b>nRF9E5-FW.zip</b> - Contains the sample codes from Nordic Semiconductor.</li>
<li><b>Product_Specification_nRF9E5_v1.6_highlight.pdf</b> - Specification sheet for NRF9E5. Descriptions on the 8051 MCU, RF transceivers and other components. Reading this document will be useful for understanding of the hardware and functions in general. <hr/>
 <h2># Function Reference # </h2>
</li>
</ul>
<h1>Utilities - <b>util.c</b></h1>
<p>void <b>InitPin</b> ( unsigned char <b>pinNum</b>, unsigned char <b>direction</b> )</p>
<p>Initialize the P0 specified as GPIO for input or output. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>pinNum - 0~7 for pin number to be GPIO direction - 0 for Output / 1 for Input</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>Delay400us</b> ( volatile unsigned char <b>n</b> )</p>
<p>Busy idle for 400us &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>n - number of times to loop</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>Delay5ms</b> ( volatile unsigned char <b>n</b> )</p>
<p>Busy idle for 5ms &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>n - number of times to loop</p>
<p>&gt;Return : void </p>
</blockquote>
<p>unsigned char <b>SpiReadWrite</b> ( unsigned char <b>b</b> )</p>
<p>Read from or write to SPI &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>b - byte to write to SPI</p>
<p>&gt;Return : byte read from SPI </p>
</blockquote>
<hr/>
 <h2>UART Functions - <b>uart.c</b></h2>
<p>void <b>InitUART</b> ( void )</p>
<p>Initialize P01 &amp; P02 for UART &gt;Parameter : </p><blockquote class="doxtable">
<p>void</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>PutChar</b> ( unsigned char <b>c</b> )</p>
<p>Print character to console / PuTTy through UART &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>c - Character to print</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>PutString</b> ( unsigned char __*s__ )</p>
<p>Print string to console / PuTTy through UART &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>*s - Pointer to string to print</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>GetChar</b> ( unsigned char __*c__ )</p>
<p>Get character from console through UART &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>*c - Pointer to character variable to populate</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>GetString</b> ( unsigned char __*s__ )</p>
<p>Get string from console through UART &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>*s - Pointer to array of char to populate</p>
<p>&gt;Return : void </p>
</blockquote>
<hr/>
 <h2>EEPROM Functions - <b>eeprom.c</b></h2>
<p>void <b>InitEEPROM</b> ( void )</p>
<p>Initialize EEPROM &gt;Parameter : </p><blockquote class="doxtable">
<p>void</p>
<p>&gt;Return : void </p>
</blockquote>
<p>unsigned char <b>EEStatus</b> ( void )</p>
<p>Returns EEPROM status &gt;Parameter : </p><blockquote class="doxtable">
<p>void</p>
<p>&gt;Return : EEPROM status </p>
</blockquote>
<p>unsigned char <b>EERead</b> ( unsigned int <b>addr</b> )</p>
<p>Read the content of EEPROM at addr. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>addr - EEPROM address to read from.</p>
<p>&gt;Return : EEPROM content at the address, addr. </p>
</blockquote>
<p>void <b>EEWrite</b> ( unsigned int <b>addr</b>, unsigned char <b>b</b> )</p>
<p>Write byte to EEPROM at addr. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>addr - EEPROM address to write to.</p>
<p>b - Byte to write at addr</p>
<p>&gt;Return : void </p>
</blockquote>
<hr/>
 <h2>Radio Functions - <b>radio.c</b></h2>
<p>void <b>InitRF</b> ( void )</p>
<p>Initialize RF Transceiver. Called at beginning or program before any RF operation. &gt;Parameter : </p><blockquote class="doxtable">
<p>void</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>TransmitPacket</b> ( unsigned char <b>b[ ]</b> )</p>
<p>Transmit packet containing the array passed. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>b[] - array to be transmitted as packet</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>ReceivePacket</b> ( unsigned char <b>b[ ]</b> )</p>
<p>Blocking function that waits for valid packet. Once packet is received, it will populate the array b[]. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>b[] - array to be populated with packet received.</p>
<p>&gt;Return : void </p>
</blockquote>
<hr/>
 <h2>Slave's Radio Functions - <b>radio_slave.c</b></h2>
<p>void <b>SlaveOp_Buffer</b> ( unsigned char <b>groupID</b>, unsigned char <b>uniqueID</b> )</p>
<p>Will receive packet and look into the contents of packet, then decide whether to relay packet or not. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>groupID - slave's own groupID</p>
<p>uniqueID - slave's own uniqueID</p>
<p>&gt;Return : void </p>
</blockquote>
<p>unsigned char <b>SlaveReceive</b> ( unsigned char <b>b[ ]</b> )</p>
<p>Called by <a class="el" href="group__radio__slave.html#ga014fb843bf90861f96e00cbfedea6f80" title="Call this function to do slave unit stuff. ">SlaveOp_Buffer()</a>. This function is the same as ReceivePacket but this function is non blocking &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>groupID - slave's own groupID</p>
<p>uniqueID - slave's own uniqueID</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>CheckTraffic</b> ( unsigned char <b>b[ ]</b>, unsigned char <b>groupID</b> )</p>
<p>Called by <a class="el" href="group__radio__slave.html#ga014fb843bf90861f96e00cbfedea6f80" title="Call this function to do slave unit stuff. ">SlaveOp_Buffer()</a> if the header byte is 0x01. This function lights up the LED according to traffic info. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>b[] - Array that stores the packet received</p>
<p>groupID - slave's own groupID</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>SendHeartBeat</b> ( unsigned char <b>groupID</b>, unsigned char <b>uniqueID</b> )</p>
<p>Called by <a class="el" href="group__radio__slave.html#ga014fb843bf90861f96e00cbfedea6f80" title="Call this function to do slave unit stuff. ">SlaveOp_Buffer()</a> if header is 0x02 and groupID matches. This function sends heartbeat back to master. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>groupID - slave's own groupID</p>
<p>uniqueID - slave's own uniqueID</p>
<p>&gt;Return : void </p>
</blockquote>
<p>void <b>SlaveRelay</b> ( unsigned char <b>groupID</b>, unsigned char <b>uniqueID</b> )</p>
<p>Called by <a class="el" href="group__radio__slave.html#ga014fb843bf90861f96e00cbfedea6f80" title="Call this function to do slave unit stuff. ">SlaveOp_Buffer()</a> after every radio operation. This function will check the id_buffer[] and determine if packet should be retransmitted or not. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>groupID - slave's own groupID</p>
<p>uniqueID - slave's own uniqueID</p>
<p>&gt;Return : void </p>
</blockquote>
<p>unsigned char <b>CheckBuffer</b> ( <a class="el" href="structpacket_i_d.html" title="stuct to track each packet ">packetID</a> <b>a</b> )</p>
<p>Called by <a class="el" href="group__radio__slave.html#gaabe0c4846ca2181e20b882380dede629" title="Retransmit the received packet. ">SlaveRelay()</a> and any function that checks id_buffer[]. This function compares <b>a</b> with existing <a class="el" href="structpacket_i_d.html" title="stuct to track each packet ">packetID</a> in id_buffer[]. Returns 0 if not in buffer. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>a -packetID to be compared to elements in id_buffer</p>
<p>&gt;Return : 0/1 to indicate whether a already exists in id_buffer </p>
</blockquote>
<hr/>
 <h2>Master's Radio Functions - <b>radio_master.c</b></h2>
<p>void <b>SendTraffic</b> ( unsigned char b[] )</p>
<p>Sends traffic info for all groups. Each byte represents traffic info for a group (for now). Each byte will represent 2 bytes in future to support more groups. &gt;Parameter : </p><blockquote class="doxtable">
<p></p>
<p>b[] -</p>
<p>uniqueID - slave's own uniqueID</p>
<p>&gt;Return : void </p>
</blockquote>
<p><em>to be continued....</em> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
