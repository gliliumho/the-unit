<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Unit: 4. EEPROM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="theunit_68_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Unit
   &#160;<span id="projectnumber">v0.5</span>
   </div>
   <div id="projectbrief">Modern railway reflector</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">4. EEPROM</div>  </div>
</div><!--header-->
<div class="contents">

<p>Macro and function declarations for EEPROM.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga7a19ed0a47b08f3cd53ef3316c7a64cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7a19ed0a47b08f3cd53ef3316c7a64cc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga7a19ed0a47b08f3cd53ef3316c7a64cc">EE_WRSR</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:ga7a19ed0a47b08f3cd53ef3316c7a64cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga7a19ed0a47b08f3cd53ef3316c7a64cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02b3fbc8070d74ff66e43629ea7126eb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga02b3fbc8070d74ff66e43629ea7126eb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga02b3fbc8070d74ff66e43629ea7126eb">EE_WRITE</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:ga02b3fbc8070d74ff66e43629ea7126eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga02b3fbc8070d74ff66e43629ea7126eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga456ae593e71ebc5f692af157bec75a20"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga456ae593e71ebc5f692af157bec75a20"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga456ae593e71ebc5f692af157bec75a20">EE_READ</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="memdesc:ga456ae593e71ebc5f692af157bec75a20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga456ae593e71ebc5f692af157bec75a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6137088c6437886a1b52ce5549f51cc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6137088c6437886a1b52ce5549f51cc6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga6137088c6437886a1b52ce5549f51cc6">EE_WRDI</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:ga6137088c6437886a1b52ce5549f51cc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga6137088c6437886a1b52ce5549f51cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga221aef74736b7beb7e8865c1183bf8e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga221aef74736b7beb7e8865c1183bf8e6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga221aef74736b7beb7e8865c1183bf8e6">EE_RDSR</a>&#160;&#160;&#160;0x05</td></tr>
<tr class="memdesc:ga221aef74736b7beb7e8865c1183bf8e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga221aef74736b7beb7e8865c1183bf8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga955c0112a95e2f39722ae9a743fe2275"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga955c0112a95e2f39722ae9a743fe2275"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga955c0112a95e2f39722ae9a743fe2275">EE_WREN</a>&#160;&#160;&#160;0x06</td></tr>
<tr class="memdesc:ga955c0112a95e2f39722ae9a743fe2275"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addresss for SPI. <br /></td></tr>
<tr class="separator:ga955c0112a95e2f39722ae9a743fe2275"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa55584a625ed1981f3aa850644145aae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#gaa55584a625ed1981f3aa850644145aae">InitEEPROM</a> (void)</td></tr>
<tr class="memdesc:gaa55584a625ed1981f3aa850644145aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize EEPROM.  <a href="#gaa55584a625ed1981f3aa850644145aae">More...</a><br /></td></tr>
<tr class="separator:gaa55584a625ed1981f3aa850644145aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf547e7f0f067a35e5a2186ffea8498e0"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#gaf547e7f0f067a35e5a2186ffea8498e0">EEStatus</a> (void)</td></tr>
<tr class="memdesc:gaf547e7f0f067a35e5a2186ffea8498e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns EEPROM status.  <a href="#gaf547e7f0f067a35e5a2186ffea8498e0">More...</a><br /></td></tr>
<tr class="separator:gaf547e7f0f067a35e5a2186ffea8498e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1116695fe0b1e41653dec7f745b285ed"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#ga1116695fe0b1e41653dec7f745b285ed">EERead</a> (unsigned int addr)</td></tr>
<tr class="memdesc:ga1116695fe0b1e41653dec7f745b285ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the content at EEPROM.  <a href="#ga1116695fe0b1e41653dec7f745b285ed">More...</a><br /></td></tr>
<tr class="separator:ga1116695fe0b1e41653dec7f745b285ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbd4f033933e412675929eb6cf7c320d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__eeprom.html#gafbd4f033933e412675929eb6cf7c320d">EEWrite</a> (unsigned int addr, unsigned char b)</td></tr>
<tr class="memdesc:gafbd4f033933e412675929eb6cf7c320d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write content to EEPROM.  <a href="#gafbd4f033933e412675929eb6cf7c320d">More...</a><br /></td></tr>
<tr class="separator:gafbd4f033933e412675929eb6cf7c320d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Macro and function declarations for EEPROM. </p>
<p>This is rarely used unless you're trying to get a non-volatile memory/storage to store any configurations.</p>
<dl class="section warning"><dt>Warning</dt><dd>When you read/write to the EEPROM, it's the same EEPROM that stores your code/firmware. So the first 3K addresses are almost guaranteed to contain code from firmware. If you OVERWRITE any data on the firmware section, you may CORRUPT it. Don't worry, you'll just need to reflash the firmware again. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa55584a625ed1981f3aa850644145aae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitEEPROM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize EEPROM. </p>
<p>This function needs to be called before using any of the EEPROM functions.</p>
<dl class="section note"><dt>Note</dt><dd>If you want to use the RF transceiver after this function is called, you need to call <a class="el" href="group__radio.html#gaef167962a7b7585b96ec52166d659aea" title="Initialize RF transceiver. ">InitRF()</a> again because EEPROM and RF transceiver both share the SPI. Calling the <a class="el" href="group__eeprom.html#gaa55584a625ed1981f3aa850644145aae" title="Initialize EEPROM. ">InitEEPROM()</a> or <a class="el" href="group__radio.html#gaef167962a7b7585b96ec52166d659aea" title="Initialize RF transceiver. ">InitRF()</a> will change the device that SPI is connecting to. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf547e7f0f067a35e5a2186ffea8498e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char EEStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns EEPROM status. </p>
<p>This function is generally not used in your program. It is only internally used by <a class="el" href="group__eeprom.html#ga1116695fe0b1e41653dec7f745b285ed" title="Read the content at EEPROM. ">EERead()</a> and <a class="el" href="group__eeprom.html#gafbd4f033933e412675929eb6cf7c320d" title="Write content to EEPROM. ">EEWrite()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd><code>idunno</code> </dd></dl>

</div>
</div>
<a class="anchor" id="ga1116695fe0b1e41653dec7f745b285ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char EERead </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the content at EEPROM. </p>
<p>Reads the byte at <code>addr</code> on EEPROM and returns the value. Do note the <code>unsigned int</code> type of the addr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>- address in EEPROM to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>content of the byte read from EEPROM </dd></dl>

</div>
</div>
<a class="anchor" id="gafbd4f033933e412675929eb6cf7c320d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EEWrite </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write content to EEPROM. </p>
<p>Write (or overwrite) the content at addr in EEPROM with <em>b</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>- address in EEPROM to write to </td></tr>
    <tr><td class="paramname">b</td><td>- content to be written to EEPROM at <code>addr</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
