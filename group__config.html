<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Unit: 5. Configurations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="theunit_68_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Unit
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Modern railway reflector</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">5. Configurations</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>struct</code> and functions for slave configurations  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structconfig.html">config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration structure.  <a href="structconfig.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga99558e053886e56d5ae72813b7f45efc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga99558e053886e56d5ae72813b7f45efc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga99558e053886e56d5ae72813b7f45efc">CFG_ADDR</a>&#160;&#160;&#160;0x0F90</td></tr>
<tr class="memdesc:ga99558e053886e56d5ae72813b7f45efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting address of configurations in EEPROM. <br /></td></tr>
<tr class="separator:ga99558e053886e56d5ae72813b7f45efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f1ff05f52096d7090f7b991ae17e1fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1f1ff05f52096d7090f7b991ae17e1fa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga1f1ff05f52096d7090f7b991ae17e1fa">GROUPID_ADDR</a>&#160;&#160;&#160;0x0F98</td></tr>
<tr class="memdesc:ga1f1ff05f52096d7090f7b991ae17e1fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM address of groupID. <br /></td></tr>
<tr class="separator:ga1f1ff05f52096d7090f7b991ae17e1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bef03d57059c04a5d9c75dd8dac809d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6bef03d57059c04a5d9c75dd8dac809d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga6bef03d57059c04a5d9c75dd8dac809d">UNIQUEID_ADDR</a>&#160;&#160;&#160;0x0F99</td></tr>
<tr class="memdesc:ga6bef03d57059c04a5d9c75dd8dac809d"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM address of uniqueID. <br /></td></tr>
<tr class="separator:ga6bef03d57059c04a5d9c75dd8dac809d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55041cee16daeddbae02453c0802c743"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga55041cee16daeddbae02453c0802c743"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga55041cee16daeddbae02453c0802c743">CHANNEL_NO_ADDR</a>&#160;&#160;&#160;0x0F9A</td></tr>
<tr class="memdesc:ga55041cee16daeddbae02453c0802c743"><td class="mdescLeft">&#160;</td><td class="mdescRight">EEPROM address of channel no. <br /></td></tr>
<tr class="separator:ga55041cee16daeddbae02453c0802c743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga35a2fb8bd442940dbb3b7a1e42de6fb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga35a2fb8bd442940dbb3b7a1e42de6fb9"></a>
typedef struct <a class="el" href="structconfig.html">config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga35a2fb8bd442940dbb3b7a1e42de6fb9">config</a></td></tr>
<tr class="memdesc:ga35a2fb8bd442940dbb3b7a1e42de6fb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blahssss. <br /></td></tr>
<tr class="separator:ga35a2fb8bd442940dbb3b7a1e42de6fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad4e5f5fc1fa74fdefff41a166f6d742d"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gad4e5f5fc1fa74fdefff41a166f6d742d">CheckHEXModified</a> (void)</td></tr>
<tr class="memdesc:gad4e5f5fc1fa74fdefff41a166f6d742d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if HEX/firmware in EEPROM is modified.  <a href="#gad4e5f5fc1fa74fdefff41a166f6d742d">More...</a><br /></td></tr>
<tr class="separator:gad4e5f5fc1fa74fdefff41a166f6d742d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacba58427f3cd8920d66e514197039a15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structconfig.html">config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gacba58427f3cd8920d66e514197039a15">ImportConfig</a> (void)</td></tr>
<tr class="separator:gacba58427f3cd8920d66e514197039a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33005b3d3ca9cf19dd6f7bd455bfe3c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga33005b3d3ca9cf19dd6f7bd455bfe3c2">CopyConfig</a> (<a class="el" href="structconfig.html">config</a> *cfg_dest, <a class="el" href="structconfig.html">config</a> cfg_src)</td></tr>
<tr class="memdesc:ga33005b3d3ca9cf19dd6f7bd455bfe3c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone <code>config</code> struct.  <a href="#ga33005b3d3ca9cf19dd6f7bd455bfe3c2">More...</a><br /></td></tr>
<tr class="separator:ga33005b3d3ca9cf19dd6f7bd455bfe3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc56726fe81a637b6ace097b2bd5a027"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#gacc56726fe81a637b6ace097b2bd5a027">ExportConfig</a> (<a class="el" href="structconfig.html">config</a> cfg)</td></tr>
<tr class="separator:gacc56726fe81a637b6ace097b2bd5a027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dbe067f79b034adba7d5d2bcf31860f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__config.html#ga9dbe067f79b034adba7d5d2bcf31860f">WriteDefaultConfig</a> (void)</td></tr>
<tr class="memdesc:ga9dbe067f79b034adba7d5d2bcf31860f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export default configuration to EEPROM.  <a href="#ga9dbe067f79b034adba7d5d2bcf31860f">More...</a><br /></td></tr>
<tr class="separator:ga9dbe067f79b034adba7d5d2bcf31860f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><code>struct</code> and functions for slave configurations </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gad4e5f5fc1fa74fdefff41a166f6d742d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char CheckHEXModified </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if HEX/firmware in EEPROM is modified. </p>
<p>Right after the EEPROM is flashed with new firmware, unused space in EEPROM will be 'initialized' to 0xFF (or 255). This function checks if the EEPROM has been modified or not. If so, are the modified bytes at default or custom values.</p>
<dl class="section return"><dt>Returns</dt><dd><b>0</b> - Unmodified - Configuration part of EEPROM is not changed after flashing. <br />
<b>1</b> - Default (modified) - Modified bytes are at default values <br />
<b>2</b> - Custom (modified) - Modified bytes are at custom values </dd></dl>

</div>
</div>
<a class="anchor" id="gacba58427f3cd8920d66e514197039a15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structconfig.html">config</a> ImportConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Import configuration values from EEPROM</p>
<dl class="section return"><dt>Returns</dt><dd>struct containing the configuration values </dd></dl>

</div>
</div>
<a class="anchor" id="ga33005b3d3ca9cf19dd6f7bd455bfe3c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CopyConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structconfig.html">config</a> *&#160;</td>
          <td class="paramname"><em>cfg_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structconfig.html">config</a>&#160;</td>
          <td class="paramname"><em>cfg_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clone <code>config</code> struct. </p>
<p>Make a clone of the <code>config</code> structure passed to <code>cfg_src</code> to <code>cfg_dest</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*cfg_dest</td><td>- destination where config is cloned to </td></tr>
    <tr><td class="paramname">cfg_src</td><td>- source config to be cloned from </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacc56726fe81a637b6ace097b2bd5a027"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ExportConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structconfig.html">config</a>&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Export/save the custom <code>config</code> into EEPROM to be retrieved on next boot</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>- config to be saved to EEPROM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9dbe067f79b034adba7d5d2bcf31860f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WriteDefaultConfig </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Export default configuration to EEPROM. </p>
<p>Same as <a class="el" href="group__config.html#gacc56726fe81a637b6ace097b2bd5a027">ExportConfig()</a> but exports default configuration instead </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
