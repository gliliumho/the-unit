<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The Unit: a. masterRF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="theunit_68_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Unit
   &#160;<span id="projectnumber">v0.5</span>
   </div>
   <div id="projectbrief">Modern railway reflector</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">a. masterRF<div class="ingroups"><a class="el" href="group__radio.html">3. Radio</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Function declarations for masterRF.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac21f6ce1f1a5bc49552ed8a4a3163025"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__radio__master.html#gac21f6ce1f1a5bc49552ed8a4a3163025">SendTraffic</a> (unsigned char b[<a class="el" href="group__radio.html#gaebdc7d8ca8e25ed8efc90bb88ef7ef5b">PACKET_SIZE</a>])</td></tr>
<tr class="memdesc:gac21f6ce1f1a5bc49552ed8a4a3163025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send traffic data.  <a href="#gac21f6ce1f1a5bc49552ed8a4a3163025">More...</a><br /></td></tr>
<tr class="separator:gac21f6ce1f1a5bc49552ed8a4a3163025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67c52c8c179804ac0725e9d3b13df432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__radio__master.html#ga67c52c8c179804ac0725e9d3b13df432">RequestHeartbeat</a> (unsigned char gid, unsigned char uid)</td></tr>
<tr class="memdesc:ga67c52c8c179804ac0725e9d3b13df432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a heartbeat request to specific slave unit.  <a href="#ga67c52c8c179804ac0725e9d3b13df432">More...</a><br /></td></tr>
<tr class="separator:ga67c52c8c179804ac0725e9d3b13df432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4af1bc0ed9d626ef3d2414c8456a9fc7"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__radio__master.html#ga4af1bc0ed9d626ef3d2414c8456a9fc7">ListenHeartbeat</a> (unsigned char gid, unsigned char uid)</td></tr>
<tr class="memdesc:ga4af1bc0ed9d626ef3d2414c8456a9fc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait to receive heartbeat.  <a href="#ga4af1bc0ed9d626ef3d2414c8456a9fc7">More...</a><br /></td></tr>
<tr class="separator:ga4af1bc0ed9d626ef3d2414c8456a9fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Function declarations for masterRF. </p>
<p>These functions are only called by masterRF. Most probably never needed for slaveRF. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gac21f6ce1f1a5bc49552ed8a4a3163025"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SendTraffic </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>b</em>[PACKET_SIZE]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send traffic data. </p>
<p>Basically <a class="el" href="group__radio.html#gaa76e79d23b9b2d1261e429f94bf03ec4" title="Transmit packet through RF. ">TransmitPacket()</a> but this function inserts the TRAFFIC_INFO_HEADER and packet_no before sending it. This function is only called by masterRF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b[]</td><td>- array to be sent as payload </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga67c52c8c179804ac0725e9d3b13df432"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestHeartbeat </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a heartbeat request to specific slave unit. </p>
<p>Slave will not automatically send heartbeat to masterRF. Heartbeat from slave needs to be requested first, then only the slave unit will send a heartbeat.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gid</td><td>- groupID of slave unit </td></tr>
    <tr><td class="paramname">uid</td><td>- uniqueID of slave unit </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4af1bc0ed9d626ef3d2414c8456a9fc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char ListenHeartbeat </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>uid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait to receive heartbeat. </p>
<p>Basically <a class="el" href="group__radio.html#gaa269a7aecf39f454d07ca60f7967a8f5" title="Receive packet through RF. ">ReceivePacket()</a> the times out. If no packet is received before it times out, then it skip the payload checking and exit the function right away. This function is called by WaitHeartbeat() only.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*gid</td><td>- pointer to groupID </td></tr>
    <tr><td class="paramname">*uid</td><td>- pointer to uniqueID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 if no packet received or gid/uid doesn't match the values passed</li>
<li>1 if packet received AND gid/uid matches the one provided </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
